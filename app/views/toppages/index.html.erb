<div class="mb-4">
  緯度：<%= @latitude %>,経度：<%= @longitude %>
</div>
<%= form_with(url: root_path, method: :get, local: true) do |f| %>
  <div class="form-group">
    <%= f.search_field :q, class: "form-control", value: @title %>
  </div>
  <div class="form-group">
    <%= f.submit "検索する", class: "btn btn-success" %>
  </div>
<% end %>

<% if @latitude %>
  <div id="map" style="width: 100%; height: 500px;"></div>
  
  <script>
      const map = L.map('map').setView([<%= @latitude %>, <%= @longitude %>], 13);
      L.tileLayer(
          'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
              maxZoom: 18,
          }).addTo(map);
      L.marker(
          [<%= @latitude %>, <%= @longitude %>],
          {title: "marker-title"}
      ).addTo(map)
          .bindPopup("<%= @title %>")
          .openPopup();
  </script>
<% else %>
  <p>検索条件に該当するものがありません</p>
<% end %>